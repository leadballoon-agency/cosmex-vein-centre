<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmex Vein Centre - Cambridge's Premier Vein Clinic</title>
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --cosmex-blue: #0056b3;
            --cosmex-light-blue: #e7f2ff;
            --cosmex-dark: #1a1a2e;
            --cosmex-gold: #d4af37;
            --text-primary: #2c3e50;
            --text-secondary: #64748b;
            --white: #ffffff;
            --soft-gray: #f8fafc;
        }

        body {
            font-family: 'Inter', -apple-system, sans-serif;
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
            background: var(--white);
            scroll-behavior: smooth;
            visibility: hidden; /* Prevent flash of content */
        }
        
        /* Prevent page jump on load */
        html {
            scroll-behavior: smooth;
            overflow-x: hidden;
        }

        /* Glassmorphism Header - Hidden by default */
        .header {
            position: fixed;
            top: -100px;
            width: 100%;
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.3);
            z-index: 1000;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .header.visible {
            top: 0;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo {
            font-family: 'Playfair Display', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--cosmex-blue);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo-mark {
            width: 35px;
            height: 35px;
            background: linear-gradient(135deg, var(--cosmex-blue), var(--cosmex-gold));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .header-cta {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .trust-badge {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--cosmex-light-blue);
            border-radius: 50px;
            font-size: 0.85rem;
            color: var(--cosmex-blue);
        }

        /* Hero Section - Clean & Elegant */
        .hero {
            height: 100vh;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            background-image: url('/public/images/cosmex-varicose-hero-3.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.95) 0%,
                rgba(255, 255, 255, 0.85) 40%,
                rgba(255, 255, 255, 0.4) 60%,
                rgba(255, 255, 255, 0.1) 100%);
            z-index: 1;
        }

        .hero-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
            position: relative;
            z-index: 2;
        }

        .hero-text {
            animation: fadeInUp 0.8s ease;
        }
        
        .hero-text h1 {
            color: var(--cosmex-dark);
        }
        
        .hero-subtitle {
            color: var(--text-secondary);
            font-size: 1.25rem;
            font-weight: 400;
        }
        
        .feature-item {
            color: var(--text-primary);
        }
        
        .feature-icon {
            background: var(--cosmex-blue);
            color: white;
        }

        .hero-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--cosmex-blue);
            color: white;
            padding: 0.5rem 1.2rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 86, 179, 0.2);
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            line-height: 1.1;
            color: var(--cosmex-dark);
            margin-bottom: 1.5rem;
        }

        .hero-subtitle {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-weight: 300;
        }

        .hero-features {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2.5rem;
        }

        .feature-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            font-size: 1rem;
        }

        .feature-icon {
            width: 24px;
            height: 24px;
            background: var(--cosmex-blue);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }

        /* Assessment Card - Elegant */
        .assessment-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            padding: 2.5rem;
            position: relative;
            animation: fadeInUp 1s ease 0.2s both;
        }

        .card-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 1.75rem;
            color: var(--cosmex-dark);
            margin-bottom: 0.5rem;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Progress Indicator - Minimal */
        .progress-bar {
            height: 3px;
            background: var(--soft-gray);
            border-radius: 3px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cosmex-blue), var(--cosmex-gold));
            border-radius: 3px;
            transition: width 0.4s ease;
            width: 14%;
        }

        /* Questions - Clean Design */
        .question-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .question-section.active {
            display: block;
        }

        .question-label {
            font-size: 1.1rem;
            color: var(--cosmex-dark);
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .option-grid {
            display: grid;
            gap: 1rem;
        }

        .option-button {
            background: white;
            border: 1px solid #e2e8f0;
            padding: 1.25rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1rem;
            color: var(--text-primary);
        }

        .option-button:hover {
            border-color: var(--cosmex-blue);
            background: #f8fafc;
        }

        .option-button.selected {
            background: var(--cosmex-blue);
            color: white;
            border-color: var(--cosmex-blue);
        }

        /* Contact Form - Refined */
        .contact-form {
            display: grid;
            gap: 1.25rem;
        }

        .form-group {
            position: relative;
        }

        .form-input {
            width: 100%;
            padding: 0.875rem;
            border: 1px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.2s ease;
            background: white;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--cosmex-blue);
            box-shadow: 0 0 0 2px rgba(0, 86, 179, 0.1);
        }

        .form-label {
            position: absolute;
            left: 1rem;
            top: -0.5rem;
            background: white;
            padding: 0 0.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Clean Buttons */
        .btn-primary {
            background: var(--cosmex-blue);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary:hover {
            background: var(--cosmex-dark);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: white;
            color: var(--cosmex-blue);
            border: 1px solid #e2e8f0;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-secondary:hover {
            border-color: var(--cosmex-blue);
            background: var(--cosmex-light-blue);
        }

        /* Navigation Buttons */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }

        .nav-btn {
            background: transparent;
            border: none;
            color: var(--cosmex-blue);
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
            padding: 0.5rem 1rem;
            border-radius: 8px;
        }

        .nav-btn:hover {
            background: var(--cosmex-light-blue);
        }

        /* Results Section - Premium */
        .results-section {
            display: none;
            text-align: center;
            animation: fadeInUp 0.6s ease;
        }

        .results-section.active {
            display: block;
        }

        .result-badge {
            display: inline-block;
            background: var(--cosmex-gold);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 50px;
            font-weight: 600;
            margin-bottom: 1.5rem;
        }

        .result-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--cosmex-dark);
            margin-bottom: 1rem;
        }

        .result-description {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-bottom: 2rem;
            line-height: 1.8;
        }

        .treatment-card {
            background: var(--soft-gray);
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            text-align: left;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }

        .treatment-card.recommended {
            border-color: var(--cosmex-gold);
            background: linear-gradient(135deg, #fffef7, #fef9e7);
        }

        .treatment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .treatment-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--cosmex-dark);
        }

        .treatment-price {
            font-size: 1.5rem;
            color: var(--cosmex-blue);
            font-weight: 700;
        }

        .guarantee-badge {
            display: inline-block;
            background: var(--cosmex-blue);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }

        /* Loading State - Elegant */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.98);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .loading-content {
            text-align: center;
            max-width: 400px;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid var(--cosmex-light-blue);
            border-top-color: var(--cosmex-blue);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 2rem;
        }

        .loading-text {
            font-size: 1.1rem;
            color: var(--cosmex-dark);
            margin-bottom: 0.5rem;
        }

        .loading-subtext {
            color: var(--text-secondary);
            font-size: 0.95rem;
        }

        /* Gorgeous Booking Modal */
        .booking-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 3000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .booking-modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .modal-container {
            position: relative;
            background: white;
            border-radius: 24px;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .booking-modal.active .modal-container {
            transform: scale(1) translateY(0);
        }

        .modal-close {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: rgba(0, 0, 0, 0.05);
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.1);
            color: var(--cosmex-dark);
            transform: rotate(90deg);
        }

        .modal-header {
            padding: 2.5rem 3rem 1.5rem;
            text-align: center;
            border-bottom: 1px solid #e2e8f0;
            background: linear-gradient(135deg, #f6f9fc 0%, #ffffff 100%);
            border-radius: 24px 24px 0 0;
        }

        .modal-badge {
            display: inline-block;
            background: var(--cosmex-gold);
            color: white;
            padding: 0.4rem 1rem;
            border-radius: 50px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-bottom: 1rem;
            animation: pulse 2s ease infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            color: var(--cosmex-dark);
            margin-bottom: 0.5rem;
        }

        .modal-subtitle {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .modal-body {
            padding: 2rem 3rem;
        }

        .booking-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--soft-gray);
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        .info-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 86, 179, 0.1);
        }

        .info-icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            border-radius: 10px;
        }

        .info-text {
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }

        .info-text strong {
            font-size: 0.85rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .info-text span {
            font-size: 0.95rem;
            color: var(--cosmex-dark);
            font-weight: 600;
        }

        .calendar-container {
            margin: 2rem 0;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 86, 179, 0.1);
            border: 2px solid var(--cosmex-light-blue);
            background: white;
        }

        .booking-guarantee {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem;
            background: linear-gradient(135deg, #e7f2ff 0%, #f0f7ff 100%);
            border-radius: 16px;
            margin-top: 2rem;
        }

        .guarantee-icon {
            width: 50px;
            height: 50px;
            background: var(--cosmex-blue);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        .guarantee-text strong {
            display: block;
            font-size: 1.1rem;
            color: var(--cosmex-dark);
            margin-bottom: 0.25rem;
        }

        .guarantee-text p {
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin: 0;
        }

        .modal-footer {
            padding: 1.5rem 3rem 2.5rem;
            text-align: center;
            border-top: 1px solid #e2e8f0;
            background: var(--soft-gray);
            border-radius: 0 0 24px 24px;
        }

        /* Responsive Modal */
        @media (max-width: 768px) {
            .modal-container {
                width: 95%;
                max-height: 95vh;
            }

            .modal-header,
            .modal-body,
            .modal-footer {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }

            .booking-info {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .modal-title {
                font-size: 1.5rem;
            }

            .calendar-container iframe {
                height: 400px !important;
            }
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .hero {
                min-height: 100vh;
                height: auto;
            }
            
            .hero-content {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 1rem;
            }
            
            .hero::before {
                background: linear-gradient(90deg, 
                    rgba(255, 255, 255, 0.98) 0%,
                    rgba(255, 255, 255, 0.9) 50%,
                    rgba(255, 255, 255, 0.3) 100%);
            }

            .header-content {
                padding: 1rem;
            }

            .trust-badge {
                display: none;
            }

            h1 {
                font-size: 2rem;
            }

            .assessment-card {
                padding: 1.5rem;
                margin: 1rem;
            }

            .option-grid {
                grid-template-columns: 1fr;
            }
            
            .header.visible {
                background: rgba(255, 255, 255, 0.95);
            }
        }

        /* Trust Indicators */
        .trust-section {
            background: var(--soft-gray);
            padding: 3rem 0;
            margin-top: -1px;
        }

        .trust-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            text-align: center;
        }

        .trust-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .trust-icon {
            width: 48px;
            height: 48px;
            background: var(--cosmex-blue);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .trust-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--cosmex-dark);
        }

        .trust-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Premium Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-mark">C</div>
                <span>Cosmex Vein Centre</span>
            </div>
            <div class="header-cta">
                <div class="trust-badge">
                    <span>‚úì</span>
                    <span>NHS Consultants</span>
                </div>
                <button class="btn-secondary" onclick="window.location.href='tel:01223902266'">
                    Call 01223 902266
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <div class="hero-badge">
                    ‚≠ê Cambridge's Premier Vein Clinic
                </div>
                <h1>Modern Vein Treatment Without Surgery</h1>
                <p class="hero-subtitle">
                    Minimally invasive procedures with early intervention for the best results
                </p>
                <div class="hero-features">
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <span>Free online vein assessment</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <span>Minimally invasive procedures</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <span>Early intervention recommended</span>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">‚úì</div>
                        <span>No traditional "stripping" surgery</span>
                    </div>
                </div>
            </div>

            <!-- Assessment Card -->
            <div class="assessment-card">
                <div class="card-header">
                    <h2 class="card-title">Free Vein Assessment</h2>
                    <p class="card-subtitle">Find out if you have varicose veins ‚Ä¢ Takes less than 2 minutes</p>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>

                <!-- Questions -->
                <div id="questionContainer">
                    <!-- Question 1: Location -->
                    <div class="question-section active" data-question="1">
                        <div class="question-label">Where are your veins located?</div>
                        <div class="option-grid">
                            <button class="option-button" onclick="selectOption('location', 'face')">
                                Face & Facial Area
                            </button>
                            <button class="option-button" onclick="selectOption('location', 'legs')">
                                Legs & Lower Body
                            </button>
                            <button class="option-button" onclick="selectOption('location', 'both')">
                                Both Face & Legs
                            </button>
                        </div>
                    </div>

                    <!-- Question 2: Symptoms -->
                    <div class="question-section" data-question="2">
                        <div class="question-label">What symptoms are you experiencing?</div>
                        <div class="option-grid">
                            <button class="option-button" onclick="selectMultiple('symptoms', 'visible_veins')">
                                Visible spider or thread veins
                            </button>
                            <button class="option-button" onclick="selectMultiple('symptoms', 'bulging')">
                                Bulging or raised veins
                            </button>
                            <button class="option-button" onclick="selectMultiple('symptoms', 'aching')">
                                Aching or heaviness
                            </button>
                            <button class="option-button" onclick="selectMultiple('symptoms', 'cosmetic')">
                                Cosmetic concerns only
                            </button>
                        </div>
                    </div>

                    <!-- Question 3: Duration -->
                    <div class="question-section" data-question="3">
                        <div class="question-label">How long have you had these veins?</div>
                        <div class="option-grid">
                            <button class="option-button" onclick="selectOption('duration', 'recent')">
                                Less than 1 year
                            </button>
                            <button class="option-button" onclick="selectOption('duration', '1-5years')">
                                1-5 years
                            </button>
                            <button class="option-button" onclick="selectOption('duration', '5plus')">
                                More than 5 years
                            </button>
                        </div>
                    </div>

                    <!-- Question 4: Impact -->
                    <div class="question-section" data-question="4">
                        <div class="question-label">How much do they affect your daily life?</div>
                        <div class="option-grid">
                            <button class="option-button" onclick="selectOption('impact', 'minimal')">
                                Minimal impact
                            </button>
                            <button class="option-button" onclick="selectOption('impact', 'moderate')">
                                Moderate impact
                            </button>
                            <button class="option-button" onclick="selectOption('impact', 'significant')">
                                Significant impact
                            </button>
                        </div>
                    </div>

                    <!-- Question 5: Goals -->
                    <div class="question-section" data-question="5">
                        <div class="question-label">What's your primary treatment goal?</div>
                        <div class="option-grid">
                            <button class="option-button" onclick="selectOption('goals', 'cosmetic')">
                                Improve appearance
                            </button>
                            <button class="option-button" onclick="selectOption('goals', 'symptoms')">
                                Relieve symptoms
                            </button>
                            <button class="option-button" onclick="selectOption('goals', 'both')">
                                Both appearance and symptoms
                            </button>
                        </div>
                    </div>

                    <!-- Contact Form -->
                    <div class="question-section" data-question="6">
                        <div class="question-label">Final step - How can we contact you?</div>
                        <form class="contact-form" id="contactForm">
                            <div class="form-group">
                                <label class="form-label">First Name</label>
                                <input type="text" class="form-input" id="firstName" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-input" id="email" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phone</label>
                                <input type="tel" class="form-input" id="phone" required>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Results -->
                <div class="results-section" id="results">
                    <div class="result-badge">Assessment Complete</div>
                    <h2 class="result-title">Your Personalised Treatment Plan</h2>
                    <p class="result-description" id="resultDescription">
                        Based on your assessment, we've identified the best treatment pathway for you.
                    </p>
                    
                    <div id="treatmentOptions"></div>
                    
                    <button class="btn-primary" style="margin-top: 2rem" onclick="bookConsultation()">
                        Book Your Consultation ‚Üí
                    </button>
                    <p style="margin-top: 1rem; color: var(--text-secondary); font-size: 0.9rem;">
                        Or call Kerry directly: <a href="tel:01223902266" style="color: var(--cosmex-blue); text-decoration: none; font-weight: 600;">01223 902266</a>
                    </p>
                </div>

                <!-- Navigation -->
                <div class="nav-buttons" id="navButtons">
                    <button class="nav-btn" id="prevBtn" onclick="previousQuestion()" style="visibility: hidden">
                        ‚Üê Back
                    </button>
                    <button class="btn-primary" id="nextBtn" onclick="nextQuestion()">
                        Continue ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!-- Trust Section -->
    <section class="trust-section">
        <div class="trust-container">
            <div class="trust-item">
                <div class="trust-icon">üè•</div>
                <div class="trust-title">NHS Consultants</div>
                <div class="trust-description">Treated by senior NHS vascular surgeons</div>
            </div>
            <div class="trust-item">
                <div class="trust-icon">üî¨</div>
                <div class="trust-title">Advanced Technology</div>
                <div class="trust-description">Latest ultrasound & laser equipment</div>
            </div>
            <div class="trust-item">
                <div class="trust-icon">‚úì</div>
                <div class="trust-title">12-Month Guarantee</div>
                <div class="trust-description">Complete peace of mind with treatment</div>
            </div>
            <div class="trust-item">
                <div class="trust-icon">‚≠ê</div>
                <div class="trust-title">5-Star Reviews</div>
                <div class="trust-description">Over 500 satisfied patients</div>
            </div>
        </div>
    </section>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Analysing your symptoms...</div>
            <div class="loading-subtext">Creating your personalised treatment plan</div>
        </div>
    </div>

    <!-- Gorgeous Booking Modal -->
    <div class="booking-modal" id="bookingModal">
        <div class="modal-backdrop" onclick="closeBookingModal()"></div>
        <div class="modal-container">
            <button class="modal-close" onclick="closeBookingModal()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            
            <div class="modal-header">
                <div class="modal-badge">Limited Availability</div>
                <h2 class="modal-title">Book Your Consultation</h2>
                <p class="modal-subtitle">Select your preferred date and time with Kerry</p>
            </div>
            
            <div class="modal-body">
                <div class="booking-info">
                    <div class="info-item">
                        <div class="info-icon">üìç</div>
                        <div class="info-text">
                            <strong>Location</strong>
                            <span>Cosmex Vein Centre, Cambridge</span>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon">‚è±</div>
                        <div class="info-text">
                            <strong>Duration</strong>
                            <span>30-45 minutes</span>
                        </div>
                    </div>
                    <div class="info-item">
                        <div class="info-icon">üí≥</div>
                        <div class="info-text">
                            <strong>Investment</strong>
                            <span id="modalPrice">¬£50 - ¬£250</span>
                        </div>
                    </div>
                </div>
                
                <!-- GHL Calendar Container -->
                <div class="calendar-container" id="ghlCalendarContainer">
                    <iframe 
                        id="ghlCalendar"
                        src="https://links.hifucambridge.com/widget/booking/LSUjMbBChuSodWiQ5k7R"
                        style="width: 100%; height: 500px; border: none; border-radius: 12px;"
                        scrolling="no">
                    </iframe>
                </div>
                
                <div class="booking-guarantee">
                    <div class="guarantee-icon">‚úì</div>
                    <div class="guarantee-text">
                        <strong>12-Month Guarantee</strong>
                        <p>Complete peace of mind with ultrasound-guided treatment</p>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" onclick="callKerry()">
                    üìû Prefer to call? 01223 902266
                </button>
            </div>
        </div>
    </div>

    <script>
        // API Configuration - use localhost for local development
        const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:3000/api' : '/api';
        
        // Assessment data
        let currentQuestion = 1;
        const totalQuestions = 6;
        let assessmentData = {
            location: null,
            symptoms: [],
            duration: null,
            impact: null,
            goals: null,
            contact: {}
        };
        let aiAnalysisData = null;

        // Select single option
        function selectOption(field, value) {
            assessmentData[field] = value;
            
            // Update UI
            const buttons = document.querySelectorAll(`[data-question="${currentQuestion}"] .option-button`);
            buttons.forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            // Auto-advance after selection
            setTimeout(() => nextQuestion(), 300);
        }

        // Select multiple options
        function selectMultiple(field, value) {
            if (!assessmentData[field]) assessmentData[field] = [];
            
            const index = assessmentData[field].indexOf(value);
            if (index > -1) {
                assessmentData[field].splice(index, 1);
                event.target.classList.remove('selected');
            } else {
                assessmentData[field].push(value);
                event.target.classList.add('selected');
            }
        }

        // Navigate questions
        function nextQuestion() {
            const currentSection = document.querySelector(`[data-question="${currentQuestion}"]`);
            
            // Validate current question
            if (currentQuestion === 6) {
                // Validate contact form
                const firstName = document.getElementById('firstName').value.trim();
                const email = document.getElementById('email').value.trim();
                const phone = document.getElementById('phone').value.trim();
                
                if (!firstName || !email || !phone) {
                    alert('Please complete all fields');
                    return;
                }
                
                assessmentData.contact = { firstName, email, phone };
                submitAssessment();
                return;
            }
            
            // Move to next question
            currentSection.classList.remove('active');
            currentQuestion++;
            
            if (currentQuestion <= totalQuestions) {
                const nextSection = document.querySelector(`[data-question="${currentQuestion}"]`);
                nextSection.classList.add('active');
                updateProgress();
                updateNavigation();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 1) {
                const currentSection = document.querySelector(`[data-question="${currentQuestion}"]`);
                currentSection.classList.remove('active');
                currentQuestion--;
                const prevSection = document.querySelector(`[data-question="${currentQuestion}"]`);
                prevSection.classList.add('active');
                updateProgress();
                updateNavigation();
            }
        }

        function updateProgress() {
            const progress = (currentQuestion / totalQuestions) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }

        function updateNavigation() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            prevBtn.style.visibility = currentQuestion > 1 ? 'visible' : 'hidden';
            
            if (currentQuestion === 6) {
                nextBtn.textContent = 'Get My Results';
            } else if (currentQuestion === 2) {
                nextBtn.textContent = 'Continue ‚Üí';
            }
        }

        async function submitAssessment() {
            // Show loading with AI processing
            showAIProcessing();
            
            // Calculate severity score
            const severityScore = calculateSeverity();
            
            try {
                // Call AI assessment API
                const response = await fetch(`${API_URL}/assess`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...assessmentData,
                        severity: severityScore,
                        impactLevel: assessmentData.impact === 'significant' ? 8 : 
                                   assessmentData.impact === 'moderate' ? 5 : 2
                    })
                });
                
                if (response.ok) {
                    aiAnalysisData = await response.json();
                    console.log('AI Analysis:', aiAnalysisData);
                }
            } catch (error) {
                console.error('AI API error:', error);
            }
            
            // Send to GHL
            try {
                await fetch('/api/ghl-webhook', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        ...assessmentData,
                        severity: severityScore,
                        aiInsights: aiAnalysisData?.aiTriage
                    })
                });
            } catch (error) {
                console.error('GHL webhook error:', error);
            }
            
            // Determine pathway with AI insights
            const pathway = assessmentData.location === 'face' ? 'facial' : 'legs';
            const requiresScan = aiAnalysisData?.aiTriage?.aiConsensus?.recommendedPathway === 'comprehensive' ||
                               assessmentData.symptoms?.includes('bulging') || 
                               assessmentData.duration === '5plus' ||
                               severityScore > 7;
            
            // Show results after processing
            setTimeout(() => {
                document.getElementById('loadingOverlay').classList.remove('active');
                showResults(pathway, requiresScan);
            }, 2000);
        }
        
        function calculateSeverity() {
            let score = 0;
            
            // Location scoring
            if (assessmentData.location === 'both') score += 3;
            else if (assessmentData.location === 'legs') score += 2;
            
            // Symptoms scoring
            if (assessmentData.symptoms?.includes('bulging')) score += 4;
            if (assessmentData.symptoms?.includes('aching')) score += 3;
            if (assessmentData.symptoms?.includes('visible_veins')) score += 2;
            
            // Duration scoring
            if (assessmentData.duration === '5plus') score += 3;
            else if (assessmentData.duration === '1-5years') score += 2;
            
            // Impact scoring
            if (assessmentData.impact === 'significant') score += 4;
            else if (assessmentData.impact === 'moderate') score += 2;
            
            return Math.min(15, score);
        }
        
        function showAIProcessing() {
            document.getElementById('loadingOverlay').classList.add('active');
            const loadingText = document.querySelector('.loading-text');
            const loadingSubtext = document.querySelector('.loading-subtext');
            
            // Professional analysis messages
            const messages = [
                { text: 'Analysing your symptoms...', sub: 'Comprehensive medical evaluation' },
                { text: 'Reviewing treatment options...', sub: 'Based on thousands of successful cases' },
                { text: 'Preparing your results...', sub: 'Personalised treatment recommendations' }
            ];
            
            let messageIndex = 0;
            const interval = setInterval(() => {
                if (messageIndex < messages.length) {
                    loadingText.textContent = messages[messageIndex].text;
                    loadingSubtext.textContent = messages[messageIndex].sub;
                    messageIndex++;
                } else {
                    clearInterval(interval);
                }
            }, 1000);
        }

        function showResults(pathway, requiresScan) {
            // Hide questions
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('navButtons').style.display = 'none';
            
            // Show results
            document.getElementById('results').classList.add('active');
            
            // Use actual assessment data to customize message
            const severity = calculateSeverity();
            const symptoms = assessmentData.symptoms?.join(', ') || 'visible veins';
            
            let personalizedMessage = '';
            if (pathway === 'facial') {
                personalizedMessage = `For your facial veins, Kerry will arrange a ¬£50 consultation with IPL or laser treatment options.`;
            } else if (severity > 10) {
                personalizedMessage = `With symptoms of ${symptoms} lasting ${assessmentData.duration}, you need comprehensive ultrasound scanning (¬£250) to identify all feeder veins and prevent recurrence.`;
            } else if (severity > 7) {
                personalizedMessage = `Your ${symptoms} indicate moderate vein issues. We strongly recommend the ¬£250 ultrasound scan for proper diagnosis and our 12-month guarantee.`;
            } else {
                personalizedMessage = `For your ${symptoms}, you can choose between our ¬£250 scan with guarantee or ¬£50 consultation without guarantee.`;
            }
            
            let treatmentHTML = '';
            
            if (pathway === 'facial') {
                document.getElementById('resultDescription').innerHTML = personalizedMessage;
                
                // Add clinical confidence if available
                if (aiAnalysisData?.aiTriage?.aiConsensus?.confidenceLevel) {
                    document.getElementById('resultDescription').innerHTML += `
                        <div style="margin-top: 1rem; padding: 1rem; background: linear-gradient(135deg, #e7f2ff, #f0f7ff); border-radius: 12px; font-size: 0.9rem; color: #0056b3;">
                            <strong>Clinical Assessment:</strong> 
                            Confidence Level: ${aiAnalysisData.aiTriage.aiConsensus?.confidenceLevel || '95%'} ‚Ä¢ 
                            Priority: ${aiAnalysisData.aiTriage.safetyAssessment?.level || 'Standard'}
                        </div>`;
                }
                
                treatmentHTML = `
                    <div class="treatment-card recommended">
                        <div class="treatment-header">
                            <div class="treatment-name">Spectra Vein Laser or IPL</div>
                            <div class="treatment-price">Consultation Required</div>
                        </div>
                        <p>Non-invasive treatment using infrared light. Facial thread veins are finer and easier to treat - often in just one session.</p>
                    </div>
                `;
            } else {
                if (requiresScan) {
                    document.getElementById('resultDescription').innerHTML = personalizedMessage;
                    
                    // Add AI urgency indicator
                    if (aiAnalysisData?.aiTriage?.safetyAssessment?.urgency) {
                        const urgency = aiAnalysisData.aiTriage.safetyAssessment.urgency;
                        const urgencyColor = urgency === 'Urgent' ? '#d4af37' : '#0056b3';
                        document.getElementById('resultDescription').innerHTML += `
                            <div style="margin-top: 1rem; padding: 1rem; background: linear-gradient(135deg, ${urgencyColor}15, ${urgencyColor}25); border-left: 4px solid ${urgencyColor}; border-radius: 8px; font-size: 0.9rem;">
                                <strong>Medical Recommendation:</strong> ${urgency} consultation advised ‚Ä¢ 
                                ${aiAnalysisData.aiTriage.treatmentPlan?.timeline || '6-12 weeks total treatment'}
                            </div>`;
                    }
                    
                    treatmentHTML = `
                        <div class="treatment-card recommended">
                            <div class="treatment-header">
                                <div class="treatment-name">Ultrasound Scan & Treatment Plan</div>
                                <div class="treatment-price">¬£250</div>
                            </div>
                            <p>Comprehensive duplex doppler ultrasound to map all veins and identify hidden feeders.</p>
                            <div class="guarantee-badge">12-MONTH GUARANTEE INCLUDED</div>
                        </div>
                        <div class="treatment-card">
                            <div class="treatment-header">
                                <div class="treatment-name">Basic Consultation</div>
                                <div class="treatment-price">¬£50</div>
                            </div>
                            <p>Surface assessment only. No guarantee. Veins may return if feeders not identified.</p>
                        </div>
                    `;
                } else {
                    document.getElementById('resultDescription').innerHTML = personalizedMessage;
                    
                    // Add AI-powered comparison
                    if (aiAnalysisData?.aiTriage?.treatmentPlan?.options) {
                        const successRate = aiAnalysisData.aiTriage.treatmentPlan.options[0]?.successRate || '85-90%';
                        document.getElementById('resultDescription').innerHTML += `
                            <div style="margin-top: 1rem; padding: 1rem; background: #f8fafc; border-radius: 12px; font-size: 0.9rem; color: #64748b;">
                                <strong>Clinical Insight:</strong> Expected success rate: ${successRate} ‚Ä¢ 
                                Kerry will discuss your best option based on your assessment
                            </div>`;
                    }
                    
                    treatmentHTML = `
                        <div class="treatment-card">
                            <div class="treatment-header">
                                <div class="treatment-name">Ultrasound Scan (Recommended)</div>
                                <div class="treatment-price">¬£250</div>
                            </div>
                            <p>Complete vein mapping with 12-month guarantee on treatment.</p>
                            <div class="guarantee-badge">12-MONTH GUARANTEE</div>
                        </div>
                        <div class="treatment-card">
                            <div class="treatment-header">
                                <div class="treatment-name">Basic Consultation</div>
                                <div class="treatment-price">¬£50</div>
                            </div>
                            <p>Initial assessment without ultrasound. No guarantee included.</p>
                        </div>
                    `;
                }
            }
            
            document.getElementById('treatmentOptions').innerHTML = treatmentHTML;
        }

        function bookConsultation() {
            openBookingModal();
        }
        
        function openBookingModal(treatmentType = null) {
            const modal = document.getElementById('bookingModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Update price based on treatment type
            if (treatmentType) {
                const priceElement = document.getElementById('modalPrice');
                if (treatmentType === 'facial') {
                    priceElement.textContent = '¬£50 Consultation';
                } else if (treatmentType === 'ultrasound') {
                    priceElement.textContent = '¬£250 Ultrasound Scan';
                } else {
                    priceElement.textContent = '¬£50 - ¬£250';
                }
            }
            
            // Track modal open event
            console.log('üìÖ Booking modal opened');
        }
        
        function closeBookingModal() {
            const modal = document.getElementById('bookingModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }
        
        function callKerry() {
            window.location.href = 'tel:01223902266';
        }
        
        // Close modal on ESC key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeBookingModal();
            }
        });

        // Load intelligent assessment system
        const script = document.createElement('script');
        script.src = '/js/intelligent-assessment.js';
        document.head.appendChild(script);
        
        // Prevent page jump on load
        window.addEventListener('load', function() {
            window.scrollTo(0, 0);
            document.body.style.visibility = 'visible';
        });
        
        // Glassmorphism navbar on scroll
        let lastScrollY = 0;
        let ticking = false;
        
        function updateNavbar() {
            const navbar = document.querySelector('.header');
            const currentScrollY = window.scrollY;
            
            if (currentScrollY > 100) {
                navbar.classList.add('visible');
            } else {
                navbar.classList.remove('visible');
            }
            
            lastScrollY = currentScrollY;
            ticking = false;
        }
        
        window.addEventListener('scroll', function() {
            if (!ticking) {
                window.requestAnimationFrame(updateNavbar);
                ticking = true;
            }
        });
        
        // Initialize
        updateProgress();
        console.log('‚ú® Cosmex Medical Assessment Ready');
        console.log('üè• Professional vein analysis system initialized');
    </script>
</body>
</html>